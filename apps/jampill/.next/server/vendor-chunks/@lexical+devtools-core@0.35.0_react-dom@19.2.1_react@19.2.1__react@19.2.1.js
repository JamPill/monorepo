"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@lexical+devtools-core@0.35.0_react-dom@19.2.1_react@19.2.1__react@19.2.1";
exports.ids = ["vendor-chunks/@lexical+devtools-core@0.35.0_react-dom@19.2.1_react@19.2.1__react@19.2.1"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@lexical+devtools-core@0.35.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/@lexical/devtools-core/LexicalDevtoolsCore.dev.mjs":
/*!**************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@lexical+devtools-core@0.35.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/@lexical/devtools-core/LexicalDevtoolsCore.dev.mjs ***!
  \**************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TreeView: () => (/* binding */ TreeView),\n/* harmony export */   generateContent: () => (/* binding */ generateContent),\n/* harmony export */   registerLexicalCommandLogger: () => (/* binding */ registerLexicalCommandLogger),\n/* harmony export */   useLexicalCommandsLog: () => (/* binding */ useLexicalCommandsLog)\n/* harmony export */ });\n/* harmony import */ var _lexical_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @lexical/html */ \"(ssr)/../../node_modules/.pnpm/@lexical+html@0.35.0/node_modules/@lexical/html/LexicalHtml.dev.mjs\");\n/* harmony import */ var _lexical_link__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lexical/link */ \"(ssr)/../../node_modules/.pnpm/@lexical+link@0.35.0/node_modules/@lexical/link/LexicalLink.dev.mjs\");\n/* harmony import */ var _lexical_mark__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lexical/mark */ \"(ssr)/../../node_modules/.pnpm/@lexical+mark@0.35.0/node_modules/@lexical/mark/LexicalMark.dev.mjs\");\n/* harmony import */ var _lexical_table__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lexical/table */ \"(ssr)/../../node_modules/.pnpm/@lexical+table@0.35.0/node_modules/@lexical/table/LexicalTable.dev.mjs\");\n/* harmony import */ var lexical__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lexical */ \"(ssr)/../../node_modules/.pnpm/lexical@0.35.0/node_modules/lexical/Lexical.dev.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@15.4.10_@babel+core@7.28.5_@playwright+test@1.56.1_react-dom@19.2.1_react@19.2.1__react@19.2.1_sass@1.77.4/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/../../node_modules/.pnpm/next@15.4.10_@babel+core@7.28.5_@playwright+test@1.56.1_react-dom@19.2.1_react@19.2.1__react@19.2.1_sass@1.77.4/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n\n\n\n\n\n\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nconst NON_SINGLE_WIDTH_CHARS_REPLACEMENT = Object.freeze({\n  '\\t': '\\\\t',\n  '\\n': '\\\\n'\n});\nconst NON_SINGLE_WIDTH_CHARS_REGEX = new RegExp(Object.keys(NON_SINGLE_WIDTH_CHARS_REPLACEMENT).join('|'), 'g');\nconst SYMBOLS = Object.freeze({\n  ancestorHasNextSibling: '|',\n  ancestorIsLastChild: ' ',\n  hasNextSibling: '├',\n  isLastChild: '└',\n  selectedChar: '^',\n  selectedLine: '>'\n});\nconst FORMAT_PREDICATES = [node => node.hasFormat('bold') && 'Bold', node => node.hasFormat('code') && 'Code', node => node.hasFormat('italic') && 'Italic', node => node.hasFormat('strikethrough') && 'Strikethrough', node => node.hasFormat('subscript') && 'Subscript', node => node.hasFormat('superscript') && 'Superscript', node => node.hasFormat('underline') && 'Underline', node => node.hasFormat('highlight') && 'Highlight'];\nconst FORMAT_PREDICATES_PARAGRAPH = [node => node.hasTextFormat('bold') && 'Bold', node => node.hasTextFormat('code') && 'Code', node => node.hasTextFormat('italic') && 'Italic', node => node.hasTextFormat('strikethrough') && 'Strikethrough', node => node.hasTextFormat('subscript') && 'Subscript', node => node.hasTextFormat('superscript') && 'Superscript', node => node.hasTextFormat('underline') && 'Underline', node => node.hasTextFormat('highlight') && 'Highlight'];\nconst DETAIL_PREDICATES = [node => node.isDirectionless() && 'Directionless', node => node.isUnmergeable() && 'Unmergeable'];\nconst MODE_PREDICATES = [node => node.isToken() && 'Token', node => node.isSegmented() && 'Segmented'];\nfunction generateContent(editor, commandsLog, exportDOM, customPrintNode, obfuscateText = false) {\n  const editorState = editor.getEditorState();\n  const editorConfig = editor._config;\n  const compositionKey = editor._compositionKey;\n  const editable = editor._editable;\n  if (exportDOM) {\n    let htmlString = '';\n    editorState.read(() => {\n      htmlString = printPrettyHTML((0,_lexical_html__WEBPACK_IMPORTED_MODULE_2__.$generateHtmlFromNodes)(editor));\n    });\n    return htmlString;\n  }\n  let res = ' root\\n';\n  const selectionString = editorState.read(() => {\n    const selection = (0,lexical__WEBPACK_IMPORTED_MODULE_3__.$getSelection)();\n    visitTree((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$getRoot)(), (node, indent) => {\n      const nodeKey = node.getKey();\n      const nodeKeyDisplay = `(${nodeKey})`;\n      const typeDisplay = node.getType() || '';\n      const isSelected = node.isSelected();\n      res += `${isSelected ? SYMBOLS.selectedLine : ' '} ${indent.join(' ')} ${nodeKeyDisplay} ${typeDisplay} ${printNode(node, customPrintNode, obfuscateText)}\\n`;\n      res += $printSelectedCharsLine({\n        indent,\n        isSelected,\n        node,\n        nodeKeyDisplay,\n        selection,\n        typeDisplay\n      });\n    });\n    return selection === null ? ': null' : (0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isRangeSelection)(selection) ? printRangeSelection(selection) : (0,_lexical_table__WEBPACK_IMPORTED_MODULE_4__.$isTableSelection)(selection) ? printTableSelection(selection) : printNodeSelection(selection);\n  });\n  res += '\\n selection' + selectionString;\n  res += '\\n\\n commands:';\n  if (commandsLog.length) {\n    for (const {\n      index,\n      type,\n      payload\n    } of commandsLog) {\n      res += `\\n  └ ${index}. { type: ${type}, payload: ${payload instanceof Event ? payload.constructor.name : payload} }`;\n    }\n  } else {\n    res += '\\n  └ None dispatched.';\n  }\n  const {\n    version\n  } = editor.constructor;\n  res += `\\n\\n editor${version ? ` (v${version})` : ''}:`;\n  res += `\\n  └ namespace ${editorConfig.namespace}`;\n  if (compositionKey !== null) {\n    res += `\\n  └ compositionKey ${compositionKey}`;\n  }\n  res += `\\n  └ editable ${String(editable)}`;\n  return res;\n}\nfunction printRangeSelection(selection) {\n  let res = '';\n  const formatText = printFormatProperties(selection);\n  res += `: range ${formatText !== '' ? `{ ${formatText} }` : ''} ${selection.style !== '' ? `{ style: ${selection.style} } ` : ''}`;\n  const anchor = selection.anchor;\n  const focus = selection.focus;\n  const anchorOffset = anchor.offset;\n  const focusOffset = focus.offset;\n  res += `\\n  ├ anchor { key: ${anchor.key}, offset: ${anchorOffset === null ? 'null' : anchorOffset}, type: ${anchor.type} }`;\n  res += `\\n  └ focus { key: ${focus.key}, offset: ${focusOffset === null ? 'null' : focusOffset}, type: ${focus.type} }`;\n  return res;\n}\nfunction printNodeSelection(selection) {\n  if (!(0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isNodeSelection)(selection)) {\n    return '';\n  }\n  return `: node\\n  └ [${Array.from(selection._nodes).join(', ')}]`;\n}\nfunction printTableSelection(selection) {\n  return `: table\\n  └ { table: ${selection.tableKey}, anchorCell: ${selection.anchor.key}, focusCell: ${selection.focus.key} }`;\n}\nfunction visitTree(currentNode, visitor, indent = []) {\n  const childNodes = currentNode.getChildren();\n  const childNodesLength = childNodes.length;\n  childNodes.forEach((childNode, i) => {\n    visitor(childNode, indent.concat(i === childNodesLength - 1 ? SYMBOLS.isLastChild : SYMBOLS.hasNextSibling));\n    if ((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isElementNode)(childNode)) {\n      visitTree(childNode, visitor, indent.concat(i === childNodesLength - 1 ? SYMBOLS.ancestorIsLastChild : SYMBOLS.ancestorHasNextSibling));\n    }\n  });\n}\nfunction normalize(text, obfuscateText = false) {\n  const textToPrint = Object.entries(NON_SINGLE_WIDTH_CHARS_REPLACEMENT).reduce((acc, [key, value]) => acc.replace(new RegExp(key, 'g'), String(value)), text);\n  if (obfuscateText) {\n    return textToPrint.replace(/[^\\s]/g, '*');\n  }\n  return textToPrint;\n}\nfunction printNode(node, customPrintNode, obfuscateText = false) {\n  const customPrint = customPrintNode ? customPrintNode(node, obfuscateText) : undefined;\n  if (customPrint !== undefined && customPrint.length > 0) {\n    return customPrint;\n  }\n  if ((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isTextNode)(node)) {\n    const text = node.getTextContent();\n    const title = text.length === 0 ? '(empty)' : `\"${normalize(text, obfuscateText)}\"`;\n    const properties = printAllTextNodeProperties(node);\n    return [title, properties.length !== 0 ? `{ ${properties} }` : null].filter(Boolean).join(' ').trim();\n  } else if ((0,_lexical_link__WEBPACK_IMPORTED_MODULE_5__.$isLinkNode)(node)) {\n    const link = node.getURL();\n    const title = link.length === 0 ? '(empty)' : `\"${normalize(link, obfuscateText)}\"`;\n    const properties = printAllLinkNodeProperties(node);\n    return [title, properties.length !== 0 ? `{ ${properties} }` : null].filter(Boolean).join(' ').trim();\n  } else if ((0,_lexical_mark__WEBPACK_IMPORTED_MODULE_6__.$isMarkNode)(node)) {\n    return `ids: [ ${node.getIDs().join(', ')} ]`;\n  } else if ((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isParagraphNode)(node)) {\n    const formatText = printTextFormatProperties(node);\n    let paragraphData = formatText !== '' ? `{ ${formatText} }` : '';\n    paragraphData += node.__style ? `(${node.__style})` : '';\n    return paragraphData;\n  } else {\n    return '';\n  }\n}\nfunction printTextFormatProperties(nodeOrSelection) {\n  let str = FORMAT_PREDICATES_PARAGRAPH.map(predicate => predicate(nodeOrSelection)).filter(Boolean).join(', ').toLocaleLowerCase();\n  if (str !== '') {\n    str = 'format: ' + str;\n  }\n  return str;\n}\nfunction printAllTextNodeProperties(node) {\n  return [printFormatProperties(node), printDetailProperties(node), printModeProperties(node), printStateProperties(node)].filter(Boolean).join(', ');\n}\nfunction printAllLinkNodeProperties(node) {\n  return [printTargetProperties(node), printRelProperties(node), printTitleProperties(node), printStateProperties(node)].filter(Boolean).join(', ');\n}\nfunction printDetailProperties(nodeOrSelection) {\n  let str = DETAIL_PREDICATES.map(predicate => predicate(nodeOrSelection)).filter(Boolean).join(', ').toLocaleLowerCase();\n  if (str !== '') {\n    str = 'detail: ' + str;\n  }\n  return str;\n}\nfunction printModeProperties(nodeOrSelection) {\n  let str = MODE_PREDICATES.map(predicate => predicate(nodeOrSelection)).filter(Boolean).join(', ').toLocaleLowerCase();\n  if (str !== '') {\n    str = 'mode: ' + str;\n  }\n  return str;\n}\nfunction printFormatProperties(nodeOrSelection) {\n  let str = FORMAT_PREDICATES.map(predicate => predicate(nodeOrSelection)).filter(Boolean).join(', ').toLocaleLowerCase();\n  if (str !== '') {\n    str = 'format: ' + str;\n  }\n  return str;\n}\nfunction printTargetProperties(node) {\n  let str = node.getTarget();\n  // TODO Fix nullish on LinkNode\n  if (str != null) {\n    str = 'target: ' + str;\n  }\n  return str;\n}\nfunction printRelProperties(node) {\n  let str = node.getRel();\n  // TODO Fix nullish on LinkNode\n  if (str != null) {\n    str = 'rel: ' + str;\n  }\n  return str;\n}\nfunction printTitleProperties(node) {\n  let str = node.getTitle();\n  // TODO Fix nullish on LinkNode\n  if (str != null) {\n    str = 'title: ' + str;\n  }\n  return str;\n}\nfunction printStateProperties(node) {\n  if (!node.__state) {\n    return false;\n  }\n  const states = [];\n  for (const [stateType, value] of node.__state.knownState.entries()) {\n    if (stateType.isEqual(value, stateType.defaultValue)) {\n      continue;\n    }\n    const textValue = JSON.stringify(stateType.unparse(value));\n    states.push(`[${stateType.key}: ${textValue}]`);\n  }\n  let str = states.join(',');\n  if (str !== '') {\n    str = 'state: ' + str;\n  }\n  return str;\n}\nfunction $printSelectedCharsLine({\n  indent,\n  isSelected,\n  node,\n  nodeKeyDisplay,\n  selection,\n  typeDisplay\n}) {\n  // No selection or node is not selected.\n  if (!(0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isTextNode)(node) || !(0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isRangeSelection)(selection) || !isSelected || (0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isElementNode)(node)) {\n    return '';\n  }\n\n  // No selected characters.\n  const anchor = selection.anchor;\n  const focus = selection.focus;\n  if (node.getTextContent() === '' || anchor.getNode() === selection.focus.getNode() && anchor.offset === focus.offset) {\n    return '';\n  }\n  const [start, end] = $getSelectionStartEnd(node, selection);\n  if (start === end) {\n    return '';\n  }\n  const selectionLastIndent = indent[indent.length - 1] === SYMBOLS.hasNextSibling ? SYMBOLS.ancestorHasNextSibling : SYMBOLS.ancestorIsLastChild;\n  const indentionChars = [...indent.slice(0, indent.length - 1), selectionLastIndent];\n  const unselectedChars = Array(start + 1).fill(' ');\n  const selectedChars = Array(end - start).fill(SYMBOLS.selectedChar);\n  const paddingLength = typeDisplay.length + 2; // 1 for the space after + 1 for the double quote.\n\n  const nodePrintSpaces = Array(nodeKeyDisplay.length + paddingLength).fill(' ');\n  return [SYMBOLS.selectedLine, indentionChars.join(' '), [...nodePrintSpaces, ...unselectedChars, ...selectedChars].join('')].join(' ') + '\\n';\n}\nfunction printPrettyHTML(str) {\n  const div = document.createElement('div');\n  div.innerHTML = str.trim();\n  return prettifyHTML(div, 0).innerHTML;\n}\nfunction prettifyHTML(node, level) {\n  const indentBefore = new Array(level++ + 1).join('  ');\n  const indentAfter = new Array(level - 1).join('  ');\n  let textNode;\n  for (let i = 0; i < node.children.length; i++) {\n    textNode = document.createTextNode('\\n' + indentBefore);\n    node.insertBefore(textNode, node.children[i]);\n    prettifyHTML(node.children[i], level);\n    if (node.lastElementChild === node.children[i]) {\n      textNode = document.createTextNode('\\n' + indentAfter);\n      node.appendChild(textNode);\n    }\n  }\n  return node;\n}\nfunction $getSelectionStartEnd(node, selection) {\n  const anchorAndFocus = selection.getStartEndPoints();\n  if ((0,lexical__WEBPACK_IMPORTED_MODULE_3__.$isNodeSelection)(selection) || anchorAndFocus === null) {\n    return [-1, -1];\n  }\n  const [anchor, focus] = anchorAndFocus;\n  const textContent = node.getTextContent();\n  const textLength = textContent.length;\n  let start = -1;\n  let end = -1;\n\n  // Only one node is being selected.\n  if (anchor.type === 'text' && focus.type === 'text') {\n    const anchorNode = anchor.getNode();\n    const focusNode = focus.getNode();\n    if (anchorNode === focusNode && node === anchorNode && anchor.offset !== focus.offset) {\n      [start, end] = anchor.offset < focus.offset ? [anchor.offset, focus.offset] : [focus.offset, anchor.offset];\n    } else if (node === anchorNode) {\n      [start, end] = anchorNode.isBefore(focusNode) ? [anchor.offset, textLength] : [0, anchor.offset];\n    } else if (node === focusNode) {\n      [start, end] = focusNode.isBefore(anchorNode) ? [focus.offset, textLength] : [0, focus.offset];\n    } else {\n      // Node is within selection but not the anchor nor focus.\n      [start, end] = [0, textLength];\n    }\n  }\n\n  // Account for non-single width characters.\n  const numNonSingleWidthCharBeforeSelection = (textContent.slice(0, start).match(NON_SINGLE_WIDTH_CHARS_REGEX) || []).length;\n  const numNonSingleWidthCharInSelection = (textContent.slice(start, end).match(NON_SINGLE_WIDTH_CHARS_REGEX) || []).length;\n  return [start + numNonSingleWidthCharBeforeSelection, end + numNonSingleWidthCharBeforeSelection + numNonSingleWidthCharInSelection];\n}\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nconst LARGE_EDITOR_STATE_SIZE = 1000;\nconst TreeView = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(function TreeViewWrapped({\n  treeTypeButtonClassName,\n  timeTravelButtonClassName,\n  timeTravelPanelSliderClassName,\n  timeTravelPanelButtonClassName,\n  viewClassName,\n  timeTravelPanelClassName,\n  editorState,\n  setEditorState,\n  setEditorReadOnly,\n  generateContent,\n  commandsLog = []\n}, ref) {\n  const [timeStampedEditorStates, setTimeStampedEditorStates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [content, setContent] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n  const [timeTravelEnabled, setTimeTravelEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showExportDOM, setShowExportDOM] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const playingIndexRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n  const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [isLimited, setIsLimited] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showLimited, setShowLimited] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const lastEditorStateRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  const lastCommandsLogRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]);\n  const lastGenerationID = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n  const generateTree = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(exportDOM => {\n    const myID = ++lastGenerationID.current;\n    generateContent(exportDOM).then(treeText => {\n      if (myID === lastGenerationID.current) {\n        setContent(treeText);\n      }\n    }).catch(err => {\n      if (myID === lastGenerationID.current) {\n        setContent(`Error rendering tree: ${err.message}\\n\\nStack:\\n${err.stack}`);\n      }\n    });\n  }, [generateContent]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!showLimited && editorState._nodeMap.size > LARGE_EDITOR_STATE_SIZE) {\n      setIsLimited(true);\n      if (!showLimited) {\n        return;\n      }\n    }\n\n    // Update view when either editor state changes or new commands are logged\n    const shouldUpdate = lastEditorStateRef.current !== editorState || lastCommandsLogRef.current !== commandsLog;\n    if (shouldUpdate) {\n      // Check if it's a real editor state change\n      const isEditorStateChange = lastEditorStateRef.current !== editorState;\n      lastEditorStateRef.current = editorState;\n      lastCommandsLogRef.current = commandsLog;\n      generateTree(showExportDOM);\n\n      // Only record in time travel if there was an actual editor state change\n      if (!timeTravelEnabled && isEditorStateChange) {\n        setTimeStampedEditorStates(currentEditorStates => [...currentEditorStates, [Date.now(), editorState]]);\n      }\n    }\n  }, [editorState, generateTree, showExportDOM, showLimited, timeTravelEnabled, commandsLog]);\n  const totalEditorStates = timeStampedEditorStates.length;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (isPlaying) {\n      let timeoutId;\n      const play = () => {\n        const currentIndex = playingIndexRef.current;\n        if (currentIndex === totalEditorStates - 1) {\n          setIsPlaying(false);\n          return;\n        }\n        const currentTime = timeStampedEditorStates[currentIndex][0];\n        const nextTime = timeStampedEditorStates[currentIndex + 1][0];\n        const timeDiff = nextTime - currentTime;\n        timeoutId = setTimeout(() => {\n          playingIndexRef.current++;\n          const index = playingIndexRef.current;\n          const input = inputRef.current;\n          if (input !== null) {\n            input.value = String(index);\n          }\n          setEditorState(timeStampedEditorStates[index][1]);\n          play();\n        }, timeDiff);\n      };\n      play();\n      return () => {\n        clearTimeout(timeoutId);\n      };\n    }\n  }, [timeStampedEditorStates, isPlaying, totalEditorStates, setEditorState]);\n  const handleExportModeToggleClick = () => {\n    generateTree(!showExportDOM);\n    setShowExportDOM(!showExportDOM);\n  };\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n    className: viewClassName,\n    children: [!showLimited && isLimited ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n      style: {\n        padding: 20\n      },\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"span\", {\n        style: {\n          marginRight: 20\n        },\n        children: \"Detected large EditorState, this can impact debugging performance.\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n        onClick: () => {\n          setShowLimited(true);\n        },\n        style: {\n          background: 'transparent',\n          border: '1px solid white',\n          color: 'white',\n          cursor: 'pointer',\n          padding: 5\n        },\n        children: \"Show full tree\"\n      })]\n    }) : null, !showLimited ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n      onClick: () => handleExportModeToggleClick(),\n      className: treeTypeButtonClassName,\n      type: \"button\",\n      children: showExportDOM ? 'Tree' : 'Export DOM'\n    }) : null, !timeTravelEnabled && (showLimited || !isLimited) && totalEditorStates > 2 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n      onClick: () => {\n        setEditorReadOnly(true);\n        playingIndexRef.current = totalEditorStates - 1;\n        setTimeTravelEnabled(true);\n      },\n      className: timeTravelButtonClassName,\n      type: \"button\",\n      children: \"Time Travel\"\n    }), (showLimited || !isLimited) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"pre\", {\n      ref: ref,\n      children: content\n    }), timeTravelEnabled && (showLimited || !isLimited) && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n      className: timeTravelPanelClassName,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n        className: timeTravelPanelButtonClassName,\n        onClick: () => {\n          if (playingIndexRef.current === totalEditorStates - 1) {\n            playingIndexRef.current = 1;\n          }\n          setIsPlaying(!isPlaying);\n        },\n        type: \"button\",\n        children: isPlaying ? 'Pause' : 'Play'\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"input\", {\n        className: timeTravelPanelSliderClassName,\n        ref: inputRef,\n        onChange: event => {\n          const editorStateIndex = Number(event.target.value);\n          const timeStampedEditorState = timeStampedEditorStates[editorStateIndex];\n          if (timeStampedEditorState) {\n            playingIndexRef.current = editorStateIndex;\n            setEditorState(timeStampedEditorState[1]);\n          }\n        },\n        type: \"range\",\n        min: \"1\",\n        max: totalEditorStates - 1\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n        className: timeTravelPanelButtonClassName,\n        onClick: () => {\n          setEditorReadOnly(false);\n          const index = timeStampedEditorStates.length - 1;\n          const timeStampedEditorState = timeStampedEditorStates[index];\n          setEditorState(timeStampedEditorState[1]);\n          const input = inputRef.current;\n          if (input !== null) {\n            input.value = String(index);\n          }\n          setTimeTravelEnabled(false);\n          setIsPlaying(false);\n        },\n        type: \"button\",\n        children: \"Exit\"\n      })]\n    })]\n  });\n});\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nfunction registerLexicalCommandLogger(editor, setLoggedCommands) {\n  const unregisterCommandListeners = new Set();\n  let i = 0;\n  for (const [command] of editor._commands) {\n    unregisterCommandListeners.add(editor.registerCommand(command, payload => {\n      setLoggedCommands(state => {\n        i += 1;\n        const newState = [...state];\n        newState.push({\n          index: i,\n          payload,\n          type: command.type ? command.type : 'UNKNOWN'\n        });\n        if (newState.length > 10) {\n          newState.shift();\n        }\n        return newState;\n      });\n      return false;\n    }, lexical__WEBPACK_IMPORTED_MODULE_3__.COMMAND_PRIORITY_CRITICAL));\n  }\n  return () => unregisterCommandListeners.forEach(unregister => unregister());\n}\nfunction useLexicalCommandsLog(editor) {\n  const [loggedCommands, setLoggedCommands] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    return registerLexicalCommandLogger(editor, setLoggedCommands);\n  }, [editor]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => loggedCommands, [loggedCommands]);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsZXhpY2FsK2RldnRvb2xzLWNvcmVAMC4zNS4wX3JlYWN0LWRvbUAxOS4yLjFfcmVhY3RAMTkuMi4xX19yZWFjdEAxOS4yLjEvbm9kZV9tb2R1bGVzL0BsZXhpY2FsL2RldnRvb2xzLWNvcmUvTGV4aWNhbERldnRvb2xzQ29yZS5kZXYubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXVEO0FBQ1g7QUFDQTtBQUNPO0FBQzhHO0FBQzNFO0FBQ3hDOztBQUU5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMscUVBQXNCO0FBQ3pELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBYTtBQUNuQyxjQUFjLGlEQUFRO0FBQ3RCO0FBQ0EsaUNBQWlDLFFBQVE7QUFDekM7QUFDQTtBQUNBLGdCQUFnQix5Q0FBeUMsRUFBRSxrQkFBa0IsRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLEVBQUUsZ0RBQWdEO0FBQ2hLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCwyQ0FBMkMsMERBQWlCLCtDQUErQyxpRUFBaUI7QUFDNUgsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHNCQUFzQixNQUFNLElBQUksUUFBUSxLQUFLLGFBQWEsZ0VBQWdFO0FBQzFIO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHVCQUF1QixnQkFB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QUNBLE9BQU87QUFDUCxLQUFLLHNDQUFzQyxzREFBRztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUsscUdBQXFHLHNEQUFHO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUssK0NBQStDLHNEQUFHO0FBQ3ZEO0FBQ0E7QUFDQSxLQUFLLG9FQUFvRSx1REFBSTtBQUM3RTtBQUNBLDhCQUE4QixzREFBRztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU8sZ0JBQWdCLHNEQUFHO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPLGdCQUFnQixzREFBRztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSyxFQUFFLDhEQUF5QjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QywrQ0FBUTtBQUN0RCxFQUFFLGdEQUFTO0FBQ1g7QUFDQSxHQUFHO0FBQ0gsU0FBUyw4Q0FBTztBQUNoQjs7QUFFMEYiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnaW9waXNvbmkvd3d3L0hlcmUvamFtcGlsbC9ub2RlX21vZHVsZXMvLnBucG0vQGxleGljYWwrZGV2dG9vbHMtY29yZUAwLjM1LjBfcmVhY3QtZG9tQDE5LjIuMV9yZWFjdEAxOS4yLjFfX3JlYWN0QDE5LjIuMS9ub2RlX21vZHVsZXMvQGxleGljYWwvZGV2dG9vbHMtY29yZS9MZXhpY2FsRGV2dG9vbHNDb3JlLmRldi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG5pbXBvcnQgeyAkZ2VuZXJhdGVIdG1sRnJvbU5vZGVzIH0gZnJvbSAnQGxleGljYWwvaHRtbCc7XG5pbXBvcnQgeyAkaXNMaW5rTm9kZSB9IGZyb20gJ0BsZXhpY2FsL2xpbmsnO1xuaW1wb3J0IHsgJGlzTWFya05vZGUgfSBmcm9tICdAbGV4aWNhbC9tYXJrJztcbmltcG9ydCB7ICRpc1RhYmxlU2VsZWN0aW9uIH0gZnJvbSAnQGxleGljYWwvdGFibGUnO1xuaW1wb3J0IHsgJGdldFNlbGVjdGlvbiwgJGdldFJvb3QsICRpc1JhbmdlU2VsZWN0aW9uLCAkaXNOb2RlU2VsZWN0aW9uLCAkaXNFbGVtZW50Tm9kZSwgJGlzVGV4dE5vZGUsICRpc1BhcmFncmFwaE5vZGUsIENPTU1BTkRfUFJJT1JJVFlfQ1JJVElDQUwgfSBmcm9tICdsZXhpY2FsJztcbmltcG9ydCB7IGZvcndhcmRSZWYsIHVzZVN0YXRlLCB1c2VSZWYsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBqc3hzLCBqc3ggfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKi9cblxuY29uc3QgTk9OX1NJTkdMRV9XSURUSF9DSEFSU19SRVBMQUNFTUVOVCA9IE9iamVjdC5mcmVlemUoe1xuICAnXFx0JzogJ1xcXFx0JyxcbiAgJ1xcbic6ICdcXFxcbidcbn0pO1xuY29uc3QgTk9OX1NJTkdMRV9XSURUSF9DSEFSU19SRUdFWCA9IG5ldyBSZWdFeHAoT2JqZWN0LmtleXMoTk9OX1NJTkdMRV9XSURUSF9DSEFSU19SRVBMQUNFTUVOVCkuam9pbignfCcpLCAnZycpO1xuY29uc3QgU1lNQk9MUyA9IE9iamVjdC5mcmVlemUoe1xuICBhbmNlc3Rvckhhc05leHRTaWJsaW5nOiAnfCcsXG4gIGFuY2VzdG9ySXNMYXN0Q2hpbGQ6ICcgJyxcbiAgaGFzTmV4dFNpYmxpbmc6ICfilJwnLFxuICBpc0xhc3RDaGlsZDogJ+KUlCcsXG4gIHNlbGVjdGVkQ2hhcjogJ14nLFxuICBzZWxlY3RlZExpbmU6ICc+J1xufSk7XG5jb25zdCBGT1JNQVRfUFJFRElDQVRFUyA9IFtub2RlID0+IG5vZGUuaGFzRm9ybWF0KCdib2xkJykgJiYgJ0JvbGQnLCBub2RlID0+IG5vZGUuaGFzRm9ybWF0KCdjb2RlJykgJiYgJ0NvZGUnLCBub2RlID0+IG5vZGUuaGFzRm9ybWF0KCdpdGFsaWMnKSAmJiAnSXRhbGljJywgbm9kZSA9PiBub2RlLmhhc0Zvcm1hdCgnc3RyaWtldGhyb3VnaCcpICYmICdTdHJpa2V0aHJvdWdoJywgbm9kZSA9PiBub2RlLmhhc0Zvcm1hdCgnc3Vic2NyaXB0JykgJiYgJ1N1YnNjcmlwdCcsIG5vZGUgPT4gbm9kZS5oYXNGb3JtYXQoJ3N1cGVyc2NyaXB0JykgJiYgJ1N1cGVyc2NyaXB0Jywgbm9kZSA9PiBub2RlLmhhc0Zvcm1hdCgndW5kZXJsaW5lJykgJiYgJ1VuZGVybGluZScsIG5vZGUgPT4gbm9kZS5oYXNGb3JtYXQoJ2hpZ2hsaWdodCcpICYmICdIaWdobGlnaHQnXTtcbmNvbnN0IEZPUk1BVF9QUkVESUNBVEVTX1BBUkFHUkFQSCA9IFtub2RlID0+IG5vZGUuaGFzVGV4dEZvcm1hdCgnYm9sZCcpICYmICdCb2xkJywgbm9kZSA9PiBub2RlLmhhc1RleHRGb3JtYXQoJ2NvZGUnKSAmJiAnQ29kZScsIG5vZGUgPT4gbm9kZS5oYXNUZXh0Rm9ybWF0KCdpdGFsaWMnKSAmJiAnSXRhbGljJywgbm9kZSA9PiBub2RlLmhhc1RleHRGb3JtYXQoJ3N0cmlrZXRocm91Z2gnKSAmJiAnU3RyaWtldGhyb3VnaCcsIG5vZGUgPT4gbm9kZS5oYXNUZXh0Rm9ybWF0KCdzdWJzY3JpcHQnKSAmJiAnU3Vic2NyaXB0Jywgbm9kZSA9PiBub2RlLmhhc1RleHRGb3JtYXQoJ3N1cGVyc2NyaXB0JykgJiYgJ1N1cGVyc2NyaXB0Jywgbm9kZSA9PiBub2RlLmhhc1RleHRGb3JtYXQoJ3VuZGVybGluZScpICYmICdVbmRlcmxpbmUnLCBub2RlID0+IG5vZGUuaGFzVGV4dEZvcm1hdCgnaGlnaGxpZ2h0JykgJiYgJ0hpZ2hsaWdodCddO1xuY29uc3QgREVUQUlMX1BSRURJQ0FURVMgPSBbbm9kZSA9PiBub2RlLmlzRGlyZWN0aW9ubGVzcygpICYmICdEaXJlY3Rpb25sZXNzJywgbm9kZSA9PiBub2RlLmlzVW5tZXJnZWFibGUoKSAmJiAnVW5tZXJnZWFibGUnXTtcbmNvbnN0IE1PREVfUFJFRElDQVRFUyA9IFtub2RlID0+IG5vZGUuaXNUb2tlbigpICYmICdUb2tlbicsIG5vZGUgPT4gbm9kZS5pc1NlZ21lbnRlZCgpICYmICdTZWdtZW50ZWQnXTtcbmZ1bmN0aW9uIGdlbmVyYXRlQ29udGVudChlZGl0b3IsIGNvbW1hbmRzTG9nLCBleHBvcnRET00sIGN1c3RvbVByaW50Tm9kZSwgb2JmdXNjYXRlVGV4dCA9IGZhbHNlKSB7XG4gIGNvbnN0IGVkaXRvclN0YXRlID0gZWRpdG9yLmdldEVkaXRvclN0YXRlKCk7XG4gIGNvbnN0IGVkaXRvckNvbmZpZyA9IGVkaXRvci5fY29uZmlnO1xuICBjb25zdCBjb21wb3NpdGlvbktleSA9IGVkaXRvci5fY29tcG9zaXRpb25LZXk7XG4gIGNvbnN0IGVkaXRhYmxlID0gZWRpdG9yLl9lZGl0YWJsZTtcbiAgaWYgKGV4cG9ydERPTSkge1xuICAgIGxldCBodG1sU3RyaW5nID0gJyc7XG4gICAgZWRpdG9yU3RhdGUucmVhZCgoKSA9PiB7XG4gICAgICBodG1sU3RyaW5nID0gcHJpbnRQcmV0dHlIVE1MKCRnZW5lcmF0ZUh0bWxGcm9tTm9kZXMoZWRpdG9yKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGh0bWxTdHJpbmc7XG4gIH1cbiAgbGV0IHJlcyA9ICcgcm9vdFxcbic7XG4gIGNvbnN0IHNlbGVjdGlvblN0cmluZyA9IGVkaXRvclN0YXRlLnJlYWQoKCkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9ICRnZXRTZWxlY3Rpb24oKTtcbiAgICB2aXNpdFRyZWUoJGdldFJvb3QoKSwgKG5vZGUsIGluZGVudCkgPT4ge1xuICAgICAgY29uc3Qgbm9kZUtleSA9IG5vZGUuZ2V0S2V5KCk7XG4gICAgICBjb25zdCBub2RlS2V5RGlzcGxheSA9IGAoJHtub2RlS2V5fSlgO1xuICAgICAgY29uc3QgdHlwZURpc3BsYXkgPSBub2RlLmdldFR5cGUoKSB8fCAnJztcbiAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSBub2RlLmlzU2VsZWN0ZWQoKTtcbiAgICAgIHJlcyArPSBgJHtpc1NlbGVjdGVkID8gU1lNQk9MUy5zZWxlY3RlZExpbmUgOiAnICd9ICR7aW5kZW50LmpvaW4oJyAnKX0gJHtub2RlS2V5RGlzcGxheX0gJHt0eXBlRGlzcGxheX0gJHtwcmludE5vZGUobm9kZSwgY3VzdG9tUHJpbnROb2RlLCBvYmZ1c2NhdGVUZXh0KX1cXG5gO1xuICAgICAgcmVzICs9ICRwcmludFNlbGVjdGVkQ2hhcnNMaW5lKHtcbiAgICAgICAgaW5kZW50LFxuICAgICAgICBpc1NlbGVjdGVkLFxuICAgICAgICBub2RlLFxuICAgICAgICBub2RlS2V5RGlzcGxheSxcbiAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICB0eXBlRGlzcGxheVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNlbGVjdGlvbiA9PT0gbnVsbCA/ICc6IG51bGwnIDogJGlzUmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSA/IHByaW50UmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSA6ICRpc1RhYmxlU2VsZWN0aW9uKHNlbGVjdGlvbikgPyBwcmludFRhYmxlU2VsZWN0aW9uKHNlbGVjdGlvbikgOiBwcmludE5vZGVTZWxlY3Rpb24oc2VsZWN0aW9uKTtcbiAgfSk7XG4gIHJlcyArPSAnXFxuIHNlbGVjdGlvbicgKyBzZWxlY3Rpb25TdHJpbmc7XG4gIHJlcyArPSAnXFxuXFxuIGNvbW1hbmRzOic7XG4gIGlmIChjb21tYW5kc0xvZy5sZW5ndGgpIHtcbiAgICBmb3IgKGNvbnN0IHtcbiAgICAgIGluZGV4LFxuICAgICAgdHlwZSxcbiAgICAgIHBheWxvYWRcbiAgICB9IG9mIGNvbW1hbmRzTG9nKSB7XG4gICAgICByZXMgKz0gYFxcbiAg4pSUICR7aW5kZXh9LiB7IHR5cGU6ICR7dHlwZX0sIHBheWxvYWQ6ICR7cGF5bG9hZCBpbnN0YW5jZW9mIEV2ZW50ID8gcGF5bG9hZC5jb25zdHJ1Y3Rvci5uYW1lIDogcGF5bG9hZH0gfWA7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcyArPSAnXFxuICDilJQgTm9uZSBkaXNwYXRjaGVkLic7XG4gIH1cbiAgY29uc3Qge1xuICAgIHZlcnNpb25cbiAgfSA9IGVkaXRvci5jb25zdHJ1Y3RvcjtcbiAgcmVzICs9IGBcXG5cXG4gZWRpdG9yJHt2ZXJzaW9uID8gYCAodiR7dmVyc2lvbn0pYCA6ICcnfTpgO1xuICByZXMgKz0gYFxcbiAg4pSUIG5hbWVzcGFjZSAke2VkaXRvckNvbmZpZy5uYW1lc3BhY2V9YDtcbiAgaWYgKGNvbXBvc2l0aW9uS2V5ICE9PSBudWxsKSB7XG4gICAgcmVzICs9IGBcXG4gIOKUlCBjb21wb3NpdGlvbktleSAke2NvbXBvc2l0aW9uS2V5fWA7XG4gIH1cbiAgcmVzICs9IGBcXG4gIOKUlCBlZGl0YWJsZSAke1N0cmluZyhlZGl0YWJsZSl9YDtcbiAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIHByaW50UmFuZ2VTZWxlY3Rpb24oc2VsZWN0aW9uKSB7XG4gIGxldCByZXMgPSAnJztcbiAgY29uc3QgZm9ybWF0VGV4dCA9IHByaW50Rm9ybWF0UHJvcGVydGllcyhzZWxlY3Rpb24pO1xuICByZXMgKz0gYDogcmFuZ2UgJHtmb3JtYXRUZXh0ICE9PSAnJyA/IGB7ICR7Zm9ybWF0VGV4dH0gfWAgOiAnJ30gJHtzZWxlY3Rpb24uc3R5bGUgIT09ICcnID8gYHsgc3R5bGU6ICR7c2VsZWN0aW9uLnN0eWxlfSB9IGAgOiAnJ31gO1xuICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcbiAgY29uc3QgYW5jaG9yT2Zmc2V0ID0gYW5jaG9yLm9mZnNldDtcbiAgY29uc3QgZm9jdXNPZmZzZXQgPSBmb2N1cy5vZmZzZXQ7XG4gIHJlcyArPSBgXFxuICDilJwgYW5jaG9yIHsga2V5OiAke2FuY2hvci5rZXl9LCBvZmZzZXQ6ICR7YW5jaG9yT2Zmc2V0ID09PSBudWxsID8gJ251bGwnIDogYW5jaG9yT2Zmc2V0fSwgdHlwZTogJHthbmNob3IudHlwZX0gfWA7XG4gIHJlcyArPSBgXFxuICDilJQgZm9jdXMgeyBrZXk6ICR7Zm9jdXMua2V5fSwgb2Zmc2V0OiAke2ZvY3VzT2Zmc2V0ID09PSBudWxsID8gJ251bGwnIDogZm9jdXNPZmZzZXR9LCB0eXBlOiAke2ZvY3VzLnR5cGV9IH1gO1xuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gcHJpbnROb2RlU2VsZWN0aW9uKHNlbGVjdGlvbikge1xuICBpZiAoISRpc05vZGVTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICByZXR1cm4gYDogbm9kZVxcbiAg4pSUIFske0FycmF5LmZyb20oc2VsZWN0aW9uLl9ub2Rlcykuam9pbignLCAnKX1dYDtcbn1cbmZ1bmN0aW9uIHByaW50VGFibGVTZWxlY3Rpb24oc2VsZWN0aW9uKSB7XG4gIHJldHVybiBgOiB0YWJsZVxcbiAg4pSUIHsgdGFibGU6ICR7c2VsZWN0aW9uLnRhYmxlS2V5fSwgYW5jaG9yQ2VsbDogJHtzZWxlY3Rpb24uYW5jaG9yLmtleX0sIGZvY3VzQ2VsbDogJHtzZWxlY3Rpb24uZm9jdXMua2V5fSB9YDtcbn1cbmZ1bmN0aW9uIHZpc2l0VHJlZShjdXJyZW50Tm9kZSwgdmlzaXRvciwgaW5kZW50ID0gW10pIHtcbiAgY29uc3QgY2hpbGROb2RlcyA9IGN1cnJlbnROb2RlLmdldENoaWxkcmVuKCk7XG4gIGNvbnN0IGNoaWxkTm9kZXNMZW5ndGggPSBjaGlsZE5vZGVzLmxlbmd0aDtcbiAgY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZE5vZGUsIGkpID0+IHtcbiAgICB2aXNpdG9yKGNoaWxkTm9kZSwgaW5kZW50LmNvbmNhdChpID09PSBjaGlsZE5vZGVzTGVuZ3RoIC0gMSA/IFNZTUJPTFMuaXNMYXN0Q2hpbGQgOiBTWU1CT0xTLmhhc05leHRTaWJsaW5nKSk7XG4gICAgaWYgKCRpc0VsZW1lbnROb2RlKGNoaWxkTm9kZSkpIHtcbiAgICAgIHZpc2l0VHJlZShjaGlsZE5vZGUsIHZpc2l0b3IsIGluZGVudC5jb25jYXQoaSA9PT0gY2hpbGROb2Rlc0xlbmd0aCAtIDEgPyBTWU1CT0xTLmFuY2VzdG9ySXNMYXN0Q2hpbGQgOiBTWU1CT0xTLmFuY2VzdG9ySGFzTmV4dFNpYmxpbmcpKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplKHRleHQsIG9iZnVzY2F0ZVRleHQgPSBmYWxzZSkge1xuICBjb25zdCB0ZXh0VG9QcmludCA9IE9iamVjdC5lbnRyaWVzKE5PTl9TSU5HTEVfV0lEVEhfQ0hBUlNfUkVQTEFDRU1FTlQpLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IGFjYy5yZXBsYWNlKG5ldyBSZWdFeHAoa2V5LCAnZycpLCBTdHJpbmcodmFsdWUpKSwgdGV4dCk7XG4gIGlmIChvYmZ1c2NhdGVUZXh0KSB7XG4gICAgcmV0dXJuIHRleHRUb1ByaW50LnJlcGxhY2UoL1teXFxzXS9nLCAnKicpO1xuICB9XG4gIHJldHVybiB0ZXh0VG9QcmludDtcbn1cbmZ1bmN0aW9uIHByaW50Tm9kZShub2RlLCBjdXN0b21QcmludE5vZGUsIG9iZnVzY2F0ZVRleHQgPSBmYWxzZSkge1xuICBjb25zdCBjdXN0b21QcmludCA9IGN1c3RvbVByaW50Tm9kZSA/IGN1c3RvbVByaW50Tm9kZShub2RlLCBvYmZ1c2NhdGVUZXh0KSA6IHVuZGVmaW5lZDtcbiAgaWYgKGN1c3RvbVByaW50ICE9PSB1bmRlZmluZWQgJiYgY3VzdG9tUHJpbnQubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBjdXN0b21QcmludDtcbiAgfVxuICBpZiAoJGlzVGV4dE5vZGUobm9kZSkpIHtcbiAgICBjb25zdCB0ZXh0ID0gbm9kZS5nZXRUZXh0Q29udGVudCgpO1xuICAgIGNvbnN0IHRpdGxlID0gdGV4dC5sZW5ndGggPT09IDAgPyAnKGVtcHR5KScgOiBgXCIke25vcm1hbGl6ZSh0ZXh0LCBvYmZ1c2NhdGVUZXh0KX1cImA7XG4gICAgY29uc3QgcHJvcGVydGllcyA9IHByaW50QWxsVGV4dE5vZGVQcm9wZXJ0aWVzKG5vZGUpO1xuICAgIHJldHVybiBbdGl0bGUsIHByb3BlcnRpZXMubGVuZ3RoICE9PSAwID8gYHsgJHtwcm9wZXJ0aWVzfSB9YCA6IG51bGxdLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJykudHJpbSgpO1xuICB9IGVsc2UgaWYgKCRpc0xpbmtOb2RlKG5vZGUpKSB7XG4gICAgY29uc3QgbGluayA9IG5vZGUuZ2V0VVJMKCk7XG4gICAgY29uc3QgdGl0bGUgPSBsaW5rLmxlbmd0aCA9PT0gMCA/ICcoZW1wdHkpJyA6IGBcIiR7bm9ybWFsaXplKGxpbmssIG9iZnVzY2F0ZVRleHQpfVwiYDtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gcHJpbnRBbGxMaW5rTm9kZVByb3BlcnRpZXMobm9kZSk7XG4gICAgcmV0dXJuIFt0aXRsZSwgcHJvcGVydGllcy5sZW5ndGggIT09IDAgPyBgeyAke3Byb3BlcnRpZXN9IH1gIDogbnVsbF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJyAnKS50cmltKCk7XG4gIH0gZWxzZSBpZiAoJGlzTWFya05vZGUobm9kZSkpIHtcbiAgICByZXR1cm4gYGlkczogWyAke25vZGUuZ2V0SURzKCkuam9pbignLCAnKX0gXWA7XG4gIH0gZWxzZSBpZiAoJGlzUGFyYWdyYXBoTm9kZShub2RlKSkge1xuICAgIGNvbnN0IGZvcm1hdFRleHQgPSBwcmludFRleHRGb3JtYXRQcm9wZXJ0aWVzKG5vZGUpO1xuICAgIGxldCBwYXJhZ3JhcGhEYXRhID0gZm9ybWF0VGV4dCAhPT0gJycgPyBgeyAke2Zvcm1hdFRleHR9IH1gIDogJyc7XG4gICAgcGFyYWdyYXBoRGF0YSArPSBub2RlLl9fc3R5bGUgPyBgKCR7bm9kZS5fX3N0eWxlfSlgIDogJyc7XG4gICAgcmV0dXJuIHBhcmFncmFwaERhdGE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5mdW5jdGlvbiBwcmludFRleHRGb3JtYXRQcm9wZXJ0aWVzKG5vZGVPclNlbGVjdGlvbikge1xuICBsZXQgc3RyID0gRk9STUFUX1BSRURJQ0FURVNfUEFSQUdSQVBILm1hcChwcmVkaWNhdGUgPT4gcHJlZGljYXRlKG5vZGVPclNlbGVjdGlvbikpLmZpbHRlcihCb29sZWFuKS5qb2luKCcsICcpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gIGlmIChzdHIgIT09ICcnKSB7XG4gICAgc3RyID0gJ2Zvcm1hdDogJyArIHN0cjtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gcHJpbnRBbGxUZXh0Tm9kZVByb3BlcnRpZXMobm9kZSkge1xuICByZXR1cm4gW3ByaW50Rm9ybWF0UHJvcGVydGllcyhub2RlKSwgcHJpbnREZXRhaWxQcm9wZXJ0aWVzKG5vZGUpLCBwcmludE1vZGVQcm9wZXJ0aWVzKG5vZGUpLCBwcmludFN0YXRlUHJvcGVydGllcyhub2RlKV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJywgJyk7XG59XG5mdW5jdGlvbiBwcmludEFsbExpbmtOb2RlUHJvcGVydGllcyhub2RlKSB7XG4gIHJldHVybiBbcHJpbnRUYXJnZXRQcm9wZXJ0aWVzKG5vZGUpLCBwcmludFJlbFByb3BlcnRpZXMobm9kZSksIHByaW50VGl0bGVQcm9wZXJ0aWVzKG5vZGUpLCBwcmludFN0YXRlUHJvcGVydGllcyhub2RlKV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJywgJyk7XG59XG5mdW5jdGlvbiBwcmludERldGFpbFByb3BlcnRpZXMobm9kZU9yU2VsZWN0aW9uKSB7XG4gIGxldCBzdHIgPSBERVRBSUxfUFJFRElDQVRFUy5tYXAocHJlZGljYXRlID0+IHByZWRpY2F0ZShub2RlT3JTZWxlY3Rpb24pKS5maWx0ZXIoQm9vbGVhbikuam9pbignLCAnKS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICBpZiAoc3RyICE9PSAnJykge1xuICAgIHN0ciA9ICdkZXRhaWw6ICcgKyBzdHI7XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn1cbmZ1bmN0aW9uIHByaW50TW9kZVByb3BlcnRpZXMobm9kZU9yU2VsZWN0aW9uKSB7XG4gIGxldCBzdHIgPSBNT0RFX1BSRURJQ0FURVMubWFwKHByZWRpY2F0ZSA9PiBwcmVkaWNhdGUobm9kZU9yU2VsZWN0aW9uKSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJywgJykudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgaWYgKHN0ciAhPT0gJycpIHtcbiAgICBzdHIgPSAnbW9kZTogJyArIHN0cjtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gcHJpbnRGb3JtYXRQcm9wZXJ0aWVzKG5vZGVPclNlbGVjdGlvbikge1xuICBsZXQgc3RyID0gRk9STUFUX1BSRURJQ0FURVMubWFwKHByZWRpY2F0ZSA9PiBwcmVkaWNhdGUobm9kZU9yU2VsZWN0aW9uKSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJywgJykudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgaWYgKHN0ciAhPT0gJycpIHtcbiAgICBzdHIgPSAnZm9ybWF0OiAnICsgc3RyO1xuICB9XG4gIHJldHVybiBzdHI7XG59XG5mdW5jdGlvbiBwcmludFRhcmdldFByb3BlcnRpZXMobm9kZSkge1xuICBsZXQgc3RyID0gbm9kZS5nZXRUYXJnZXQoKTtcbiAgLy8gVE9ETyBGaXggbnVsbGlzaCBvbiBMaW5rTm9kZVxuICBpZiAoc3RyICE9IG51bGwpIHtcbiAgICBzdHIgPSAndGFyZ2V0OiAnICsgc3RyO1xuICB9XG4gIHJldHVybiBzdHI7XG59XG5mdW5jdGlvbiBwcmludFJlbFByb3BlcnRpZXMobm9kZSkge1xuICBsZXQgc3RyID0gbm9kZS5nZXRSZWwoKTtcbiAgLy8gVE9ETyBGaXggbnVsbGlzaCBvbiBMaW5rTm9kZVxuICBpZiAoc3RyICE9IG51bGwpIHtcbiAgICBzdHIgPSAncmVsOiAnICsgc3RyO1xuICB9XG4gIHJldHVybiBzdHI7XG59XG5mdW5jdGlvbiBwcmludFRpdGxlUHJvcGVydGllcyhub2RlKSB7XG4gIGxldCBzdHIgPSBub2RlLmdldFRpdGxlKCk7XG4gIC8vIFRPRE8gRml4IG51bGxpc2ggb24gTGlua05vZGVcbiAgaWYgKHN0ciAhPSBudWxsKSB7XG4gICAgc3RyID0gJ3RpdGxlOiAnICsgc3RyO1xuICB9XG4gIHJldHVybiBzdHI7XG59XG5mdW5jdGlvbiBwcmludFN0YXRlUHJvcGVydGllcyhub2RlKSB7XG4gIGlmICghbm9kZS5fX3N0YXRlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHN0YXRlcyA9IFtdO1xuICBmb3IgKGNvbnN0IFtzdGF0ZVR5cGUsIHZhbHVlXSBvZiBub2RlLl9fc3RhdGUua25vd25TdGF0ZS5lbnRyaWVzKCkpIHtcbiAgICBpZiAoc3RhdGVUeXBlLmlzRXF1YWwodmFsdWUsIHN0YXRlVHlwZS5kZWZhdWx0VmFsdWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgdGV4dFZhbHVlID0gSlNPTi5zdHJpbmdpZnkoc3RhdGVUeXBlLnVucGFyc2UodmFsdWUpKTtcbiAgICBzdGF0ZXMucHVzaChgWyR7c3RhdGVUeXBlLmtleX06ICR7dGV4dFZhbHVlfV1gKTtcbiAgfVxuICBsZXQgc3RyID0gc3RhdGVzLmpvaW4oJywnKTtcbiAgaWYgKHN0ciAhPT0gJycpIHtcbiAgICBzdHIgPSAnc3RhdGU6ICcgKyBzdHI7XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn1cbmZ1bmN0aW9uICRwcmludFNlbGVjdGVkQ2hhcnNMaW5lKHtcbiAgaW5kZW50LFxuICBpc1NlbGVjdGVkLFxuICBub2RlLFxuICBub2RlS2V5RGlzcGxheSxcbiAgc2VsZWN0aW9uLFxuICB0eXBlRGlzcGxheVxufSkge1xuICAvLyBObyBzZWxlY3Rpb24gb3Igbm9kZSBpcyBub3Qgc2VsZWN0ZWQuXG4gIGlmICghJGlzVGV4dE5vZGUobm9kZSkgfHwgISRpc1JhbmdlU2VsZWN0aW9uKHNlbGVjdGlvbikgfHwgIWlzU2VsZWN0ZWQgfHwgJGlzRWxlbWVudE5vZGUobm9kZSkpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICAvLyBObyBzZWxlY3RlZCBjaGFyYWN0ZXJzLlxuICBjb25zdCBhbmNob3IgPSBzZWxlY3Rpb24uYW5jaG9yO1xuICBjb25zdCBmb2N1cyA9IHNlbGVjdGlvbi5mb2N1cztcbiAgaWYgKG5vZGUuZ2V0VGV4dENvbnRlbnQoKSA9PT0gJycgfHwgYW5jaG9yLmdldE5vZGUoKSA9PT0gc2VsZWN0aW9uLmZvY3VzLmdldE5vZGUoKSAmJiBhbmNob3Iub2Zmc2V0ID09PSBmb2N1cy5vZmZzZXQpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgY29uc3QgW3N0YXJ0LCBlbmRdID0gJGdldFNlbGVjdGlvblN0YXJ0RW5kKG5vZGUsIHNlbGVjdGlvbik7XG4gIGlmIChzdGFydCA9PT0gZW5kKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGNvbnN0IHNlbGVjdGlvbkxhc3RJbmRlbnQgPSBpbmRlbnRbaW5kZW50Lmxlbmd0aCAtIDFdID09PSBTWU1CT0xTLmhhc05leHRTaWJsaW5nID8gU1lNQk9MUy5hbmNlc3Rvckhhc05leHRTaWJsaW5nIDogU1lNQk9MUy5hbmNlc3RvcklzTGFzdENoaWxkO1xuICBjb25zdCBpbmRlbnRpb25DaGFycyA9IFsuLi5pbmRlbnQuc2xpY2UoMCwgaW5kZW50Lmxlbmd0aCAtIDEpLCBzZWxlY3Rpb25MYXN0SW5kZW50XTtcbiAgY29uc3QgdW5zZWxlY3RlZENoYXJzID0gQXJyYXkoc3RhcnQgKyAxKS5maWxsKCcgJyk7XG4gIGNvbnN0IHNlbGVjdGVkQ2hhcnMgPSBBcnJheShlbmQgLSBzdGFydCkuZmlsbChTWU1CT0xTLnNlbGVjdGVkQ2hhcik7XG4gIGNvbnN0IHBhZGRpbmdMZW5ndGggPSB0eXBlRGlzcGxheS5sZW5ndGggKyAyOyAvLyAxIGZvciB0aGUgc3BhY2UgYWZ0ZXIgKyAxIGZvciB0aGUgZG91YmxlIHF1b3RlLlxuXG4gIGNvbnN0IG5vZGVQcmludFNwYWNlcyA9IEFycmF5KG5vZGVLZXlEaXNwbGF5Lmxlbmd0aCArIHBhZGRpbmdMZW5ndGgpLmZpbGwoJyAnKTtcbiAgcmV0dXJuIFtTWU1CT0xTLnNlbGVjdGVkTGluZSwgaW5kZW50aW9uQ2hhcnMuam9pbignICcpLCBbLi4ubm9kZVByaW50U3BhY2VzLCAuLi51bnNlbGVjdGVkQ2hhcnMsIC4uLnNlbGVjdGVkQ2hhcnNdLmpvaW4oJycpXS5qb2luKCcgJykgKyAnXFxuJztcbn1cbmZ1bmN0aW9uIHByaW50UHJldHR5SFRNTChzdHIpIHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpdi5pbm5lckhUTUwgPSBzdHIudHJpbSgpO1xuICByZXR1cm4gcHJldHRpZnlIVE1MKGRpdiwgMCkuaW5uZXJIVE1MO1xufVxuZnVuY3Rpb24gcHJldHRpZnlIVE1MKG5vZGUsIGxldmVsKSB7XG4gIGNvbnN0IGluZGVudEJlZm9yZSA9IG5ldyBBcnJheShsZXZlbCsrICsgMSkuam9pbignICAnKTtcbiAgY29uc3QgaW5kZW50QWZ0ZXIgPSBuZXcgQXJyYXkobGV2ZWwgLSAxKS5qb2luKCcgICcpO1xuICBsZXQgdGV4dE5vZGU7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1xcbicgKyBpbmRlbnRCZWZvcmUpO1xuICAgIG5vZGUuaW5zZXJ0QmVmb3JlKHRleHROb2RlLCBub2RlLmNoaWxkcmVuW2ldKTtcbiAgICBwcmV0dGlmeUhUTUwobm9kZS5jaGlsZHJlbltpXSwgbGV2ZWwpO1xuICAgIGlmIChub2RlLmxhc3RFbGVtZW50Q2hpbGQgPT09IG5vZGUuY2hpbGRyZW5baV0pIHtcbiAgICAgIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1xcbicgKyBpbmRlbnRBZnRlcik7XG4gICAgICBub2RlLmFwcGVuZENoaWxkKHRleHROb2RlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5mdW5jdGlvbiAkZ2V0U2VsZWN0aW9uU3RhcnRFbmQobm9kZSwgc2VsZWN0aW9uKSB7XG4gIGNvbnN0IGFuY2hvckFuZEZvY3VzID0gc2VsZWN0aW9uLmdldFN0YXJ0RW5kUG9pbnRzKCk7XG4gIGlmICgkaXNOb2RlU2VsZWN0aW9uKHNlbGVjdGlvbikgfHwgYW5jaG9yQW5kRm9jdXMgPT09IG51bGwpIHtcbiAgICByZXR1cm4gWy0xLCAtMV07XG4gIH1cbiAgY29uc3QgW2FuY2hvciwgZm9jdXNdID0gYW5jaG9yQW5kRm9jdXM7XG4gIGNvbnN0IHRleHRDb250ZW50ID0gbm9kZS5nZXRUZXh0Q29udGVudCgpO1xuICBjb25zdCB0ZXh0TGVuZ3RoID0gdGV4dENvbnRlbnQubGVuZ3RoO1xuICBsZXQgc3RhcnQgPSAtMTtcbiAgbGV0IGVuZCA9IC0xO1xuXG4gIC8vIE9ubHkgb25lIG5vZGUgaXMgYmVpbmcgc2VsZWN0ZWQuXG4gIGlmIChhbmNob3IudHlwZSA9PT0gJ3RleHQnICYmIGZvY3VzLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgIGNvbnN0IGFuY2hvck5vZGUgPSBhbmNob3IuZ2V0Tm9kZSgpO1xuICAgIGNvbnN0IGZvY3VzTm9kZSA9IGZvY3VzLmdldE5vZGUoKTtcbiAgICBpZiAoYW5jaG9yTm9kZSA9PT0gZm9jdXNOb2RlICYmIG5vZGUgPT09IGFuY2hvck5vZGUgJiYgYW5jaG9yLm9mZnNldCAhPT0gZm9jdXMub2Zmc2V0KSB7XG4gICAgICBbc3RhcnQsIGVuZF0gPSBhbmNob3Iub2Zmc2V0IDwgZm9jdXMub2Zmc2V0ID8gW2FuY2hvci5vZmZzZXQsIGZvY3VzLm9mZnNldF0gOiBbZm9jdXMub2Zmc2V0LCBhbmNob3Iub2Zmc2V0XTtcbiAgICB9IGVsc2UgaWYgKG5vZGUgPT09IGFuY2hvck5vZGUpIHtcbiAgICAgIFtzdGFydCwgZW5kXSA9IGFuY2hvck5vZGUuaXNCZWZvcmUoZm9jdXNOb2RlKSA/IFthbmNob3Iub2Zmc2V0LCB0ZXh0TGVuZ3RoXSA6IFswLCBhbmNob3Iub2Zmc2V0XTtcbiAgICB9IGVsc2UgaWYgKG5vZGUgPT09IGZvY3VzTm9kZSkge1xuICAgICAgW3N0YXJ0LCBlbmRdID0gZm9jdXNOb2RlLmlzQmVmb3JlKGFuY2hvck5vZGUpID8gW2ZvY3VzLm9mZnNldCwgdGV4dExlbmd0aF0gOiBbMCwgZm9jdXMub2Zmc2V0XTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm9kZSBpcyB3aXRoaW4gc2VsZWN0aW9uIGJ1dCBub3QgdGhlIGFuY2hvciBub3IgZm9jdXMuXG4gICAgICBbc3RhcnQsIGVuZF0gPSBbMCwgdGV4dExlbmd0aF07XG4gICAgfVxuICB9XG5cbiAgLy8gQWNjb3VudCBmb3Igbm9uLXNpbmdsZSB3aWR0aCBjaGFyYWN0ZXJzLlxuICBjb25zdCBudW1Ob25TaW5nbGVXaWR0aENoYXJCZWZvcmVTZWxlY3Rpb24gPSAodGV4dENvbnRlbnQuc2xpY2UoMCwgc3RhcnQpLm1hdGNoKE5PTl9TSU5HTEVfV0lEVEhfQ0hBUlNfUkVHRVgpIHx8IFtdKS5sZW5ndGg7XG4gIGNvbnN0IG51bU5vblNpbmdsZVdpZHRoQ2hhckluU2VsZWN0aW9uID0gKHRleHRDb250ZW50LnNsaWNlKHN0YXJ0LCBlbmQpLm1hdGNoKE5PTl9TSU5HTEVfV0lEVEhfQ0hBUlNfUkVHRVgpIHx8IFtdKS5sZW5ndGg7XG4gIHJldHVybiBbc3RhcnQgKyBudW1Ob25TaW5nbGVXaWR0aENoYXJCZWZvcmVTZWxlY3Rpb24sIGVuZCArIG51bU5vblNpbmdsZVdpZHRoQ2hhckJlZm9yZVNlbGVjdGlvbiArIG51bU5vblNpbmdsZVdpZHRoQ2hhckluU2VsZWN0aW9uXTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqL1xuXG5jb25zdCBMQVJHRV9FRElUT1JfU1RBVEVfU0laRSA9IDEwMDA7XG5jb25zdCBUcmVlVmlldyA9IC8qI19fUFVSRV9fKi9mb3J3YXJkUmVmKGZ1bmN0aW9uIFRyZWVWaWV3V3JhcHBlZCh7XG4gIHRyZWVUeXBlQnV0dG9uQ2xhc3NOYW1lLFxuICB0aW1lVHJhdmVsQnV0dG9uQ2xhc3NOYW1lLFxuICB0aW1lVHJhdmVsUGFuZWxTbGlkZXJDbGFzc05hbWUsXG4gIHRpbWVUcmF2ZWxQYW5lbEJ1dHRvbkNsYXNzTmFtZSxcbiAgdmlld0NsYXNzTmFtZSxcbiAgdGltZVRyYXZlbFBhbmVsQ2xhc3NOYW1lLFxuICBlZGl0b3JTdGF0ZSxcbiAgc2V0RWRpdG9yU3RhdGUsXG4gIHNldEVkaXRvclJlYWRPbmx5LFxuICBnZW5lcmF0ZUNvbnRlbnQsXG4gIGNvbW1hbmRzTG9nID0gW11cbn0sIHJlZikge1xuICBjb25zdCBbdGltZVN0YW1wZWRFZGl0b3JTdGF0ZXMsIHNldFRpbWVTdGFtcGVkRWRpdG9yU3RhdGVzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2NvbnRlbnQsIHNldENvbnRlbnRdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbdGltZVRyYXZlbEVuYWJsZWQsIHNldFRpbWVUcmF2ZWxFbmFibGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dFeHBvcnRET00sIHNldFNob3dFeHBvcnRET01dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBwbGF5aW5nSW5kZXhSZWYgPSB1c2VSZWYoMCk7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbaXNQbGF5aW5nLCBzZXRJc1BsYXlpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNMaW1pdGVkLCBzZXRJc0xpbWl0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0xpbWl0ZWQsIHNldFNob3dMaW1pdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgbGFzdEVkaXRvclN0YXRlUmVmID0gdXNlUmVmKCk7XG4gIGNvbnN0IGxhc3RDb21tYW5kc0xvZ1JlZiA9IHVzZVJlZihbXSk7XG4gIGNvbnN0IGxhc3RHZW5lcmF0aW9uSUQgPSB1c2VSZWYoMCk7XG4gIGNvbnN0IGdlbmVyYXRlVHJlZSA9IHVzZUNhbGxiYWNrKGV4cG9ydERPTSA9PiB7XG4gICAgY29uc3QgbXlJRCA9ICsrbGFzdEdlbmVyYXRpb25JRC5jdXJyZW50O1xuICAgIGdlbmVyYXRlQ29udGVudChleHBvcnRET00pLnRoZW4odHJlZVRleHQgPT4ge1xuICAgICAgaWYgKG15SUQgPT09IGxhc3RHZW5lcmF0aW9uSUQuY3VycmVudCkge1xuICAgICAgICBzZXRDb250ZW50KHRyZWVUZXh0KTtcbiAgICAgIH1cbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgaWYgKG15SUQgPT09IGxhc3RHZW5lcmF0aW9uSUQuY3VycmVudCkge1xuICAgICAgICBzZXRDb250ZW50KGBFcnJvciByZW5kZXJpbmcgdHJlZTogJHtlcnIubWVzc2FnZX1cXG5cXG5TdGFjazpcXG4ke2Vyci5zdGFja31gKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW2dlbmVyYXRlQ29udGVudF0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2hvd0xpbWl0ZWQgJiYgZWRpdG9yU3RhdGUuX25vZGVNYXAuc2l6ZSA+IExBUkdFX0VESVRPUl9TVEFURV9TSVpFKSB7XG4gICAgICBzZXRJc0xpbWl0ZWQodHJ1ZSk7XG4gICAgICBpZiAoIXNob3dMaW1pdGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdmlldyB3aGVuIGVpdGhlciBlZGl0b3Igc3RhdGUgY2hhbmdlcyBvciBuZXcgY29tbWFuZHMgYXJlIGxvZ2dlZFxuICAgIGNvbnN0IHNob3VsZFVwZGF0ZSA9IGxhc3RFZGl0b3JTdGF0ZVJlZi5jdXJyZW50ICE9PSBlZGl0b3JTdGF0ZSB8fCBsYXN0Q29tbWFuZHNMb2dSZWYuY3VycmVudCAhPT0gY29tbWFuZHNMb2c7XG4gICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIHJlYWwgZWRpdG9yIHN0YXRlIGNoYW5nZVxuICAgICAgY29uc3QgaXNFZGl0b3JTdGF0ZUNoYW5nZSA9IGxhc3RFZGl0b3JTdGF0ZVJlZi5jdXJyZW50ICE9PSBlZGl0b3JTdGF0ZTtcbiAgICAgIGxhc3RFZGl0b3JTdGF0ZVJlZi5jdXJyZW50ID0gZWRpdG9yU3RhdGU7XG4gICAgICBsYXN0Q29tbWFuZHNMb2dSZWYuY3VycmVudCA9IGNvbW1hbmRzTG9nO1xuICAgICAgZ2VuZXJhdGVUcmVlKHNob3dFeHBvcnRET00pO1xuXG4gICAgICAvLyBPbmx5IHJlY29yZCBpbiB0aW1lIHRyYXZlbCBpZiB0aGVyZSB3YXMgYW4gYWN0dWFsIGVkaXRvciBzdGF0ZSBjaGFuZ2VcbiAgICAgIGlmICghdGltZVRyYXZlbEVuYWJsZWQgJiYgaXNFZGl0b3JTdGF0ZUNoYW5nZSkge1xuICAgICAgICBzZXRUaW1lU3RhbXBlZEVkaXRvclN0YXRlcyhjdXJyZW50RWRpdG9yU3RhdGVzID0+IFsuLi5jdXJyZW50RWRpdG9yU3RhdGVzLCBbRGF0ZS5ub3coKSwgZWRpdG9yU3RhdGVdXSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbZWRpdG9yU3RhdGUsIGdlbmVyYXRlVHJlZSwgc2hvd0V4cG9ydERPTSwgc2hvd0xpbWl0ZWQsIHRpbWVUcmF2ZWxFbmFibGVkLCBjb21tYW5kc0xvZ10pO1xuICBjb25zdCB0b3RhbEVkaXRvclN0YXRlcyA9IHRpbWVTdGFtcGVkRWRpdG9yU3RhdGVzLmxlbmd0aDtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNQbGF5aW5nKSB7XG4gICAgICBsZXQgdGltZW91dElkO1xuICAgICAgY29uc3QgcGxheSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gcGxheWluZ0luZGV4UmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmIChjdXJyZW50SW5kZXggPT09IHRvdGFsRWRpdG9yU3RhdGVzIC0gMSkge1xuICAgICAgICAgIHNldElzUGxheWluZyhmYWxzZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gdGltZVN0YW1wZWRFZGl0b3JTdGF0ZXNbY3VycmVudEluZGV4XVswXTtcbiAgICAgICAgY29uc3QgbmV4dFRpbWUgPSB0aW1lU3RhbXBlZEVkaXRvclN0YXRlc1tjdXJyZW50SW5kZXggKyAxXVswXTtcbiAgICAgICAgY29uc3QgdGltZURpZmYgPSBuZXh0VGltZSAtIGN1cnJlbnRUaW1lO1xuICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBwbGF5aW5nSW5kZXhSZWYuY3VycmVudCsrO1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGxheWluZ0luZGV4UmVmLmN1cnJlbnQ7XG4gICAgICAgICAgY29uc3QgaW5wdXQgPSBpbnB1dFJlZi5jdXJyZW50O1xuICAgICAgICAgIGlmIChpbnB1dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBTdHJpbmcoaW5kZXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXRFZGl0b3JTdGF0ZSh0aW1lU3RhbXBlZEVkaXRvclN0YXRlc1tpbmRleF1bMV0pO1xuICAgICAgICAgIHBsYXkoKTtcbiAgICAgICAgfSwgdGltZURpZmYpO1xuICAgICAgfTtcbiAgICAgIHBsYXkoKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFt0aW1lU3RhbXBlZEVkaXRvclN0YXRlcywgaXNQbGF5aW5nLCB0b3RhbEVkaXRvclN0YXRlcywgc2V0RWRpdG9yU3RhdGVdKTtcbiAgY29uc3QgaGFuZGxlRXhwb3J0TW9kZVRvZ2dsZUNsaWNrID0gKCkgPT4ge1xuICAgIGdlbmVyYXRlVHJlZSghc2hvd0V4cG9ydERPTSk7XG4gICAgc2V0U2hvd0V4cG9ydERPTSghc2hvd0V4cG9ydERPTSk7XG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovanN4cyhcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiB2aWV3Q2xhc3NOYW1lLFxuICAgIGNoaWxkcmVuOiBbIXNob3dMaW1pdGVkICYmIGlzTGltaXRlZCA/IC8qI19fUFVSRV9fKi9qc3hzKFwiZGl2XCIsIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHBhZGRpbmc6IDIwXG4gICAgICB9LFxuICAgICAgY2hpbGRyZW46IFsvKiNfX1BVUkVfXyovanN4KFwic3BhblwiLCB7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgbWFyZ2luUmlnaHQ6IDIwXG4gICAgICAgIH0sXG4gICAgICAgIGNoaWxkcmVuOiBcIkRldGVjdGVkIGxhcmdlIEVkaXRvclN0YXRlLCB0aGlzIGNhbiBpbXBhY3QgZGVidWdnaW5nIHBlcmZvcm1hbmNlLlwiXG4gICAgICB9KSwgLyojX19QVVJFX18qL2pzeChcImJ1dHRvblwiLCB7XG4gICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICBzZXRTaG93TGltaXRlZCh0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB3aGl0ZScsXG4gICAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgcGFkZGluZzogNVxuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogXCJTaG93IGZ1bGwgdHJlZVwiXG4gICAgICB9KV1cbiAgICB9KSA6IG51bGwsICFzaG93TGltaXRlZCA/IC8qI19fUFVSRV9fKi9qc3goXCJidXR0b25cIiwge1xuICAgICAgb25DbGljazogKCkgPT4gaGFuZGxlRXhwb3J0TW9kZVRvZ2dsZUNsaWNrKCksXG4gICAgICBjbGFzc05hbWU6IHRyZWVUeXBlQnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgIGNoaWxkcmVuOiBzaG93RXhwb3J0RE9NID8gJ1RyZWUnIDogJ0V4cG9ydCBET00nXG4gICAgfSkgOiBudWxsLCAhdGltZVRyYXZlbEVuYWJsZWQgJiYgKHNob3dMaW1pdGVkIHx8ICFpc0xpbWl0ZWQpICYmIHRvdGFsRWRpdG9yU3RhdGVzID4gMiAmJiAvKiNfX1BVUkVfXyovanN4KFwiYnV0dG9uXCIsIHtcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgc2V0RWRpdG9yUmVhZE9ubHkodHJ1ZSk7XG4gICAgICAgIHBsYXlpbmdJbmRleFJlZi5jdXJyZW50ID0gdG90YWxFZGl0b3JTdGF0ZXMgLSAxO1xuICAgICAgICBzZXRUaW1lVHJhdmVsRW5hYmxlZCh0cnVlKTtcbiAgICAgIH0sXG4gICAgICBjbGFzc05hbWU6IHRpbWVUcmF2ZWxCdXR0b25DbGFzc05hbWUsXG4gICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgY2hpbGRyZW46IFwiVGltZSBUcmF2ZWxcIlxuICAgIH0pLCAoc2hvd0xpbWl0ZWQgfHwgIWlzTGltaXRlZCkgJiYgLyojX19QVVJFX18qL2pzeChcInByZVwiLCB7XG4gICAgICByZWY6IHJlZixcbiAgICAgIGNoaWxkcmVuOiBjb250ZW50XG4gICAgfSksIHRpbWVUcmF2ZWxFbmFibGVkICYmIChzaG93TGltaXRlZCB8fCAhaXNMaW1pdGVkKSAmJiAvKiNfX1BVUkVfXyovanN4cyhcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IHRpbWVUcmF2ZWxQYW5lbENsYXNzTmFtZSxcbiAgICAgIGNoaWxkcmVuOiBbLyojX19QVVJFX18qL2pzeChcImJ1dHRvblwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogdGltZVRyYXZlbFBhbmVsQnV0dG9uQ2xhc3NOYW1lLFxuICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgaWYgKHBsYXlpbmdJbmRleFJlZi5jdXJyZW50ID09PSB0b3RhbEVkaXRvclN0YXRlcyAtIDEpIHtcbiAgICAgICAgICAgIHBsYXlpbmdJbmRleFJlZi5jdXJyZW50ID0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0SXNQbGF5aW5nKCFpc1BsYXlpbmcpO1xuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBjaGlsZHJlbjogaXNQbGF5aW5nID8gJ1BhdXNlJyA6ICdQbGF5J1xuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goXCJpbnB1dFwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogdGltZVRyYXZlbFBhbmVsU2xpZGVyQ2xhc3NOYW1lLFxuICAgICAgICByZWY6IGlucHV0UmVmLFxuICAgICAgICBvbkNoYW5nZTogZXZlbnQgPT4ge1xuICAgICAgICAgIGNvbnN0IGVkaXRvclN0YXRlSW5kZXggPSBOdW1iZXIoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICBjb25zdCB0aW1lU3RhbXBlZEVkaXRvclN0YXRlID0gdGltZVN0YW1wZWRFZGl0b3JTdGF0ZXNbZWRpdG9yU3RhdGVJbmRleF07XG4gICAgICAgICAgaWYgKHRpbWVTdGFtcGVkRWRpdG9yU3RhdGUpIHtcbiAgICAgICAgICAgIHBsYXlpbmdJbmRleFJlZi5jdXJyZW50ID0gZWRpdG9yU3RhdGVJbmRleDtcbiAgICAgICAgICAgIHNldEVkaXRvclN0YXRlKHRpbWVTdGFtcGVkRWRpdG9yU3RhdGVbMV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogXCJyYW5nZVwiLFxuICAgICAgICBtaW46IFwiMVwiLFxuICAgICAgICBtYXg6IHRvdGFsRWRpdG9yU3RhdGVzIC0gMVxuICAgICAgfSksIC8qI19fUFVSRV9fKi9qc3goXCJidXR0b25cIiwge1xuICAgICAgICBjbGFzc05hbWU6IHRpbWVUcmF2ZWxQYW5lbEJ1dHRvbkNsYXNzTmFtZSxcbiAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgIHNldEVkaXRvclJlYWRPbmx5KGZhbHNlKTtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRpbWVTdGFtcGVkRWRpdG9yU3RhdGVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgY29uc3QgdGltZVN0YW1wZWRFZGl0b3JTdGF0ZSA9IHRpbWVTdGFtcGVkRWRpdG9yU3RhdGVzW2luZGV4XTtcbiAgICAgICAgICBzZXRFZGl0b3JTdGF0ZSh0aW1lU3RhbXBlZEVkaXRvclN0YXRlWzFdKTtcbiAgICAgICAgICBjb25zdCBpbnB1dCA9IGlucHV0UmVmLmN1cnJlbnQ7XG4gICAgICAgICAgaWYgKGlucHV0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IFN0cmluZyhpbmRleCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldFRpbWVUcmF2ZWxFbmFibGVkKGZhbHNlKTtcbiAgICAgICAgICBzZXRJc1BsYXlpbmcoZmFsc2UpO1xuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBjaGlsZHJlbjogXCJFeGl0XCJcbiAgICAgIH0pXVxuICAgIH0pXVxuICB9KTtcbn0pO1xuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICovXG5cbmZ1bmN0aW9uIHJlZ2lzdGVyTGV4aWNhbENvbW1hbmRMb2dnZXIoZWRpdG9yLCBzZXRMb2dnZWRDb21tYW5kcykge1xuICBjb25zdCB1bnJlZ2lzdGVyQ29tbWFuZExpc3RlbmVycyA9IG5ldyBTZXQoKTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKGNvbnN0IFtjb21tYW5kXSBvZiBlZGl0b3IuX2NvbW1hbmRzKSB7XG4gICAgdW5yZWdpc3RlckNvbW1hbmRMaXN0ZW5lcnMuYWRkKGVkaXRvci5yZWdpc3RlckNvbW1hbmQoY29tbWFuZCwgcGF5bG9hZCA9PiB7XG4gICAgICBzZXRMb2dnZWRDb21tYW5kcyhzdGF0ZSA9PiB7XG4gICAgICAgIGkgKz0gMTtcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSBbLi4uc3RhdGVdO1xuICAgICAgICBuZXdTdGF0ZS5wdXNoKHtcbiAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgIHR5cGU6IGNvbW1hbmQudHlwZSA/IGNvbW1hbmQudHlwZSA6ICdVTktOT1dOJ1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG5ld1N0YXRlLmxlbmd0aCA+IDEwKSB7XG4gICAgICAgICAgbmV3U3RhdGUuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LCBDT01NQU5EX1BSSU9SSVRZX0NSSVRJQ0FMKSk7XG4gIH1cbiAgcmV0dXJuICgpID0+IHVucmVnaXN0ZXJDb21tYW5kTGlzdGVuZXJzLmZvckVhY2godW5yZWdpc3RlciA9PiB1bnJlZ2lzdGVyKCkpO1xufVxuZnVuY3Rpb24gdXNlTGV4aWNhbENvbW1hbmRzTG9nKGVkaXRvcikge1xuICBjb25zdCBbbG9nZ2VkQ29tbWFuZHMsIHNldExvZ2dlZENvbW1hbmRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gcmVnaXN0ZXJMZXhpY2FsQ29tbWFuZExvZ2dlcihlZGl0b3IsIHNldExvZ2dlZENvbW1hbmRzKTtcbiAgfSwgW2VkaXRvcl0pO1xuICByZXR1cm4gdXNlTWVtbygoKSA9PiBsb2dnZWRDb21tYW5kcywgW2xvZ2dlZENvbW1hbmRzXSk7XG59XG5cbmV4cG9ydCB7IFRyZWVWaWV3LCBnZW5lcmF0ZUNvbnRlbnQsIHJlZ2lzdGVyTGV4aWNhbENvbW1hbmRMb2dnZXIsIHVzZUxleGljYWxDb21tYW5kc0xvZyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@lexical+devtools-core@0.35.0_react-dom@19.2.1_react@19.2.1__react@19.2.1/node_modules/@lexical/devtools-core/LexicalDevtoolsCore.dev.mjs\n");

/***/ })

};
;